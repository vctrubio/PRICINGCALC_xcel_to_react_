{"ast":null,"code":"// ag-grid-react v31.1.1\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CellCompState = void 0;\nvar ag_grid_community_1 = require(\"ag-grid-community\");\nvar react_1 = __importStar(require(\"react\"));\nvar utils_1 = require(\"../utils\");\nvar popupEditorComp_1 = __importDefault(require(\"./popupEditorComp\"));\nvar showJsRenderer_1 = __importDefault(require(\"./showJsRenderer\"));\nvar beansContext_1 = require(\"../beansContext\");\nvar jsComp_1 = require(\"../jsComp\");\nvar cellEditorComponentProxy_1 = require(\"../../shared/customComp/cellEditorComponentProxy\");\nvar customContext_1 = require(\"../../shared/customComp/customContext\");\nvar util_1 = require(\"../../shared/customComp/util\");\nvar CellCompState;\n(function (CellCompState) {\n  CellCompState[CellCompState[\"ShowValue\"] = 0] = \"ShowValue\";\n  CellCompState[CellCompState[\"EditValue\"] = 1] = \"EditValue\";\n})(CellCompState = exports.CellCompState || (exports.CellCompState = {}));\nvar checkCellEditorDeprecations = function (popup, cellEditor, cellCtrl) {\n  var col = cellCtrl.getColumn();\n  // cellEditor is written to be a popup editor, however colDef.cellEditorPopup is not set\n  if (!popup && cellEditor.isPopup && cellEditor.isPopup()) {\n    var msg_1 = \"AG Grid: Found an issue in column \" + col.getColId() + \". If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.\";\n    ag_grid_community_1._.doOnce(function () {\n      return console.warn(msg_1);\n    }, 'jsEditorComp-isPopup-' + cellCtrl.getColumn().getColId());\n  }\n  // cellEditor is a popup and is trying to position itself the deprecated way\n  if (popup && cellEditor.getPopupPosition && cellEditor.getPopupPosition() != null) {\n    var msg_2 = \"AG Grid: Found an issue in column \" + col.getColId() + \". If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.\";\n    ag_grid_community_1._.doOnce(function () {\n      return console.warn(msg_2);\n    }, 'jsEditorComp-getPopupPosition-' + cellCtrl.getColumn().getColId());\n  }\n};\nvar jsxEditorProxy = function (editDetails, CellEditorClass, setRef) {\n  var compProxy = editDetails.compProxy;\n  setRef(compProxy);\n  var props = compProxy.getProps();\n  var isStateless = utils_1.isComponentStateless(CellEditorClass);\n  return react_1.default.createElement(customContext_1.CustomContext.Provider, {\n    value: {\n      setMethods: function (methods) {\n        return compProxy.setMethods(methods);\n      }\n    }\n  }, isStateless && react_1.default.createElement(CellEditorClass, __assign({}, props)), !isStateless && react_1.default.createElement(CellEditorClass, __assign({}, props, {\n    ref: function (ref) {\n      return compProxy.setRef(ref);\n    }\n  })));\n};\nvar jsxEditor = function (editDetails, CellEditorClass, setRef) {\n  var newFormat = editDetails.compProxy;\n  return react_1.default.createElement(react_1.default.Fragment, null, !newFormat && react_1.default.createElement(CellEditorClass, __assign({}, editDetails.compDetails.params, {\n    ref: setRef\n  })), newFormat && jsxEditorProxy(editDetails, CellEditorClass, setRef));\n};\nvar jsxEditValue = function (editDetails, setInlineCellEditorRef, setPopupCellEditorRef, eGui, cellCtrl, jsEditorComp) {\n  var compDetails = editDetails.compDetails;\n  var CellEditorClass = compDetails.componentClass;\n  var reactInlineEditor = compDetails.componentFromFramework && !editDetails.popup;\n  var reactPopupEditor = compDetails.componentFromFramework && editDetails.popup;\n  var jsPopupEditor = !compDetails.componentFromFramework && editDetails.popup;\n  return react_1.default.createElement(react_1.default.Fragment, null, reactInlineEditor && jsxEditor(editDetails, CellEditorClass, setInlineCellEditorRef), reactPopupEditor && react_1.default.createElement(popupEditorComp_1.default, {\n    editDetails: editDetails,\n    cellCtrl: cellCtrl,\n    eParentCell: eGui,\n    wrappedContent: jsxEditor(editDetails, CellEditorClass, setPopupCellEditorRef)\n  }), jsPopupEditor && jsEditorComp && react_1.default.createElement(popupEditorComp_1.default, {\n    editDetails: editDetails,\n    cellCtrl: cellCtrl,\n    eParentCell: eGui,\n    jsChildComp: jsEditorComp\n  }));\n};\nvar jsxShowValue = function (showDetails, key, parentId, cellRendererRef, showCellWrapper, reactCellRendererStateless, setECellValue) {\n  var compDetails = showDetails.compDetails,\n    value = showDetails.value;\n  var noCellRenderer = !compDetails;\n  var reactCellRenderer = compDetails && compDetails.componentFromFramework;\n  var CellRendererClass = compDetails && compDetails.componentClass;\n  // if we didn't do this, objects would cause React error. we depend on objects for things\n  // like the aggregation functions avg and count, which return objects and depend on toString()\n  // getting called.\n  var valueForNoCellRenderer = (value === null || value === void 0 ? void 0 : value.toString) ? value.toString() : value;\n  var bodyJsxFunc = function () {\n    return react_1.default.createElement(react_1.default.Fragment, null, noCellRenderer && react_1.default.createElement(react_1.default.Fragment, null, valueForNoCellRenderer), reactCellRenderer && !reactCellRendererStateless && react_1.default.createElement(CellRendererClass, __assign({}, compDetails.params, {\n      key: key,\n      ref: cellRendererRef\n    })), reactCellRenderer && reactCellRendererStateless && react_1.default.createElement(CellRendererClass, __assign({}, compDetails.params, {\n      key: key\n    })));\n  };\n  return react_1.default.createElement(react_1.default.Fragment, null, showCellWrapper ? react_1.default.createElement(\"span\", {\n    role: \"presentation\",\n    id: \"cell-\" + parentId,\n    className: \"ag-cell-value\",\n    ref: setECellValue\n  }, bodyJsxFunc()) : bodyJsxFunc());\n};\nvar CellComp = function (props) {\n  var context = react_1.useContext(beansContext_1.BeansContext).context;\n  var cellCtrl = props.cellCtrl,\n    printLayout = props.printLayout,\n    editingRow = props.editingRow;\n  var tabIndex = cellCtrl.getTabIndex();\n  var colId = cellCtrl.getColumnIdSanitised();\n  var cellInstanceId = cellCtrl.getInstanceId();\n  // Only provide an initial state when not using a Cell Renderer so that we do not display a raw value before the cell renderer is created.\n  var _a = react_1.useState(function () {\n      return cellCtrl.isCellRenderer() ? undefined : {\n        compDetails: undefined,\n        value: cellCtrl.getValueToDisplay(),\n        force: false\n      };\n    }),\n    renderDetails = _a[0],\n    setRenderDetails = _a[1];\n  var _b = react_1.useState(),\n    editDetails = _b[0],\n    setEditDetails = _b[1];\n  var _c = react_1.useState(1),\n    renderKey = _c[0],\n    setRenderKey = _c[1];\n  var _d = react_1.useState(),\n    userStyles = _d[0],\n    setUserStyles = _d[1];\n  var _e = react_1.useState(false),\n    includeSelection = _e[0],\n    setIncludeSelection = _e[1];\n  var _f = react_1.useState(false),\n    includeRowDrag = _f[0],\n    setIncludeRowDrag = _f[1];\n  var _g = react_1.useState(false),\n    includeDndSource = _g[0],\n    setIncludeDndSource = _g[1];\n  var _h = react_1.useState(),\n    jsEditorComp = _h[0],\n    setJsEditorComp = _h[1];\n  // useMemo as more then just accessing a boolean on the cellCtrl\n  var forceWrapper = react_1.useMemo(function () {\n    return cellCtrl.isForceWrapper();\n  }, [cellCtrl]);\n  var cellAriaRole = react_1.useMemo(function () {\n    return cellCtrl.getCellAriaRole();\n  }, [cellCtrl]);\n  var eGui = react_1.useRef(null);\n  var cellRendererRef = react_1.useRef(null);\n  var jsCellRendererRef = react_1.useRef();\n  var cellEditorRef = react_1.useRef();\n  var eCellWrapper = react_1.useRef();\n  var cellWrapperDestroyFuncs = react_1.useRef([]);\n  // when setting the ref, we also update the state item to force a re-render\n  var eCellValue = react_1.useRef();\n  var _j = react_1.useState(0),\n    cellValueVersion = _j[0],\n    setCellValueVersion = _j[1];\n  var setCellValueRef = react_1.useCallback(function (ref) {\n    eCellValue.current = ref;\n    setCellValueVersion(function (v) {\n      return v + 1;\n    });\n  }, []);\n  var showTools = renderDetails != null && (includeSelection || includeDndSource || includeRowDrag);\n  var showCellWrapper = forceWrapper || showTools;\n  var setCellEditorRef = react_1.useCallback(function (popup, cellEditor) {\n    cellEditorRef.current = cellEditor;\n    if (cellEditor) {\n      checkCellEditorDeprecations(popup, cellEditor, cellCtrl);\n      var editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();\n      if (editingCancelledByUserComp) {\n        // we cannot set state inside render, so hack is to do it in next VM turn\n        setTimeout(function () {\n          cellCtrl.stopEditing(true);\n          cellCtrl.focusCell(true);\n        });\n      }\n    }\n  }, [cellCtrl]);\n  var setPopupCellEditorRef = react_1.useCallback(function (cellRenderer) {\n    return setCellEditorRef(true, cellRenderer);\n  }, [setCellEditorRef]);\n  var setInlineCellEditorRef = react_1.useCallback(function (cellRenderer) {\n    return setCellEditorRef(false, cellRenderer);\n  }, [setCellEditorRef]);\n  var cssClassManager = react_1.useRef();\n  if (!cssClassManager.current) {\n    cssClassManager.current = new ag_grid_community_1.CssClassManager(function () {\n      return eGui.current;\n    });\n  }\n  showJsRenderer_1.default(renderDetails, showCellWrapper, eCellValue.current, cellValueVersion, jsCellRendererRef, eGui);\n  // if RenderDetails changed, need to call refresh. This is not our preferred way (the preferred\n  // way for React is just allow the new props to propagate down to the React Cell Renderer)\n  // however we do this for backwards compatibility, as having refresh used to be supported.\n  var lastRenderDetails = react_1.useRef();\n  react_1.useLayoutEffect(function () {\n    var oldDetails = lastRenderDetails.current;\n    var newDetails = renderDetails;\n    lastRenderDetails.current = renderDetails;\n    // if not updating renderDetails, do nothing\n    if (oldDetails == null || oldDetails.compDetails == null || newDetails == null || newDetails.compDetails == null) {\n      return;\n    }\n    var oldCompDetails = oldDetails.compDetails;\n    var newCompDetails = newDetails.compDetails;\n    // if different Cell Renderer, then do nothing, as renderer will be recreated\n    if (oldCompDetails.componentClass != newCompDetails.componentClass) {\n      return;\n    }\n    // if no refresh method, do nothing\n    if (cellRendererRef.current == null || cellRendererRef.current.refresh == null) {\n      return;\n    }\n    var result = cellRendererRef.current.refresh(newCompDetails.params);\n    if (result != true) {\n      // increasing the render key forces the refresh. this is undocumented (for React users,\n      // we don't document the refresh method, instead we tell them to act on new params).\n      // however the GroupCellRenderer has this logic in it and would need a small refactor\n      // to get it working without using refresh() returning false. so this hack staying in,\n      // in React if refresh() is implemented and returns false (or undefined), we force a refresh\n      setRenderKey(function (prev) {\n        return prev + 1;\n      });\n    }\n  }, [renderDetails]);\n  react_1.useLayoutEffect(function () {\n    var doingJsEditor = editDetails && !editDetails.compDetails.componentFromFramework;\n    if (!doingJsEditor) {\n      return;\n    }\n    var compDetails = editDetails.compDetails;\n    var isPopup = editDetails.popup === true;\n    var cellEditor = jsComp_1.createSyncJsComp(compDetails);\n    if (!cellEditor) {\n      return;\n    }\n    var compGui = cellEditor.getGui();\n    setCellEditorRef(isPopup, cellEditor);\n    if (!isPopup) {\n      var parentEl = (forceWrapper ? eCellWrapper : eGui).current;\n      parentEl === null || parentEl === void 0 ? void 0 : parentEl.appendChild(compGui);\n      cellEditor.afterGuiAttached && cellEditor.afterGuiAttached();\n    }\n    setJsEditorComp(cellEditor);\n    return function () {\n      context.destroyBean(cellEditor);\n      setCellEditorRef(isPopup, undefined);\n      setJsEditorComp(undefined);\n      if (compGui && compGui.parentElement) {\n        compGui.parentElement.removeChild(compGui);\n      }\n    };\n  }, [editDetails]);\n  // tool widgets effect\n  var setCellWrapperRef = react_1.useCallback(function (ref) {\n    eCellWrapper.current = ref;\n    if (!eCellWrapper.current) {\n      cellWrapperDestroyFuncs.current.forEach(function (f) {\n        return f();\n      });\n      cellWrapperDestroyFuncs.current = [];\n      return;\n    }\n    var addComp = function (comp) {\n      var _a;\n      if (comp) {\n        var eGui_1 = comp.getGui();\n        (_a = eCellWrapper.current) === null || _a === void 0 ? void 0 : _a.insertAdjacentElement('afterbegin', eGui_1);\n        cellWrapperDestroyFuncs.current.push(function () {\n          context.destroyBean(comp);\n          ag_grid_community_1._.removeFromParent(eGui_1);\n        });\n      }\n      return comp;\n    };\n    if (includeSelection) {\n      var checkboxSelectionComp = cellCtrl.createSelectionCheckbox();\n      addComp(checkboxSelectionComp);\n    }\n    if (includeDndSource) {\n      addComp(cellCtrl.createDndSource());\n    }\n    if (includeRowDrag) {\n      addComp(cellCtrl.createRowDragComp());\n    }\n  }, [cellCtrl, context, includeDndSource, includeRowDrag, includeSelection]);\n  // we use layout effect here as we want to synchronously process setComp and it's side effects\n  // to ensure the component is fully initialised prior to the first browser paint. See AG-7018.\n  var setRef = react_1.useCallback(function (ref) {\n    eGui.current = ref;\n    if (!eGui.current) {\n      return;\n    }\n    if (!cellCtrl) {\n      return;\n    }\n    var compProxy = {\n      addOrRemoveCssClass: function (name, on) {\n        return cssClassManager.current.addOrRemoveCssClass(name, on);\n      },\n      setUserStyles: function (styles) {\n        return setUserStyles(styles);\n      },\n      getFocusableElement: function () {\n        return eGui.current;\n      },\n      setIncludeSelection: function (include) {\n        return setIncludeSelection(include);\n      },\n      setIncludeRowDrag: function (include) {\n        return setIncludeRowDrag(include);\n      },\n      setIncludeDndSource: function (include) {\n        return setIncludeDndSource(include);\n      },\n      getCellEditor: function () {\n        return cellEditorRef.current || null;\n      },\n      getCellRenderer: function () {\n        return cellRendererRef.current ? cellRendererRef.current : jsCellRendererRef.current;\n      },\n      getParentOfValue: function () {\n        return eCellValue.current ? eCellValue.current : eCellWrapper.current ? eCellWrapper.current : eGui.current;\n      },\n      setRenderDetails: function (compDetails, value, force) {\n        setRenderDetails(function (prev) {\n          if ((prev === null || prev === void 0 ? void 0 : prev.compDetails) !== compDetails || (prev === null || prev === void 0 ? void 0 : prev.value) !== value || (prev === null || prev === void 0 ? void 0 : prev.force) !== force) {\n            return {\n              value: value,\n              compDetails: compDetails,\n              force: force\n            };\n          } else {\n            return prev;\n          }\n        });\n      },\n      setEditDetails: function (compDetails, popup, popupPosition, reactiveCustomComponents) {\n        if (compDetails) {\n          var compProxy_1 = undefined;\n          if (reactiveCustomComponents) {\n            compProxy_1 = new cellEditorComponentProxy_1.CellEditorComponentProxy(compDetails.params, function () {\n              return setRenderKey(function (prev) {\n                return prev + 1;\n              });\n            });\n          } else if (compDetails.componentFromFramework) {\n            util_1.warnReactiveCustomComponents();\n          }\n          // start editing\n          setEditDetails({\n            compDetails: compDetails,\n            popup: popup,\n            popupPosition: popupPosition,\n            compProxy: compProxy_1\n          });\n          if (!popup) {\n            setRenderDetails(undefined);\n          }\n        } else {\n          // stop editing\n          setEditDetails(function (editDetails) {\n            if (editDetails === null || editDetails === void 0 ? void 0 : editDetails.compProxy) {\n              // if we're using the proxy, we have to manually clear the ref\n              cellEditorRef.current = undefined;\n            }\n            return undefined;\n          });\n        }\n      }\n    };\n    var cellWrapperOrUndefined = eCellWrapper.current || undefined;\n    cellCtrl.setComp(compProxy, eGui.current, cellWrapperOrUndefined, printLayout, editingRow);\n  }, []);\n  var reactCellRendererStateless = react_1.useMemo(function () {\n    var res = renderDetails && renderDetails.compDetails && renderDetails.compDetails.componentFromFramework && utils_1.isComponentStateless(renderDetails.compDetails.componentClass);\n    return !!res;\n  }, [renderDetails]);\n  react_1.useLayoutEffect(function () {\n    var _a;\n    if (!eGui.current) {\n      return;\n    }\n    cssClassManager.current.addOrRemoveCssClass('ag-cell-value', !showCellWrapper);\n    cssClassManager.current.addOrRemoveCssClass('ag-cell-inline-editing', !!editDetails && !editDetails.popup);\n    cssClassManager.current.addOrRemoveCssClass('ag-cell-popup-editing', !!editDetails && !!editDetails.popup);\n    cssClassManager.current.addOrRemoveCssClass('ag-cell-not-inline-editing', !editDetails || !!editDetails.popup);\n    (_a = cellCtrl.getRowCtrl()) === null || _a === void 0 ? void 0 : _a.setInlineEditingCss(!!editDetails);\n    if (cellCtrl.shouldRestoreFocus() && !cellCtrl.isEditing()) {\n      // Restore focus to the cell if it was focused before and not editing.\n      // If it is editing then it is likely the focus was moved to the editor and we should not move it back.\n      eGui.current.focus({\n        preventScroll: true\n      });\n    }\n  });\n  var showContents = function () {\n    return react_1.default.createElement(react_1.default.Fragment, null, renderDetails != null && jsxShowValue(renderDetails, renderKey, cellInstanceId, cellRendererRef, showCellWrapper, reactCellRendererStateless, setCellValueRef), editDetails != null && jsxEditValue(editDetails, setInlineCellEditorRef, setPopupCellEditorRef, eGui.current, cellCtrl, jsEditorComp));\n  };\n  return react_1.default.createElement(\"div\", {\n    ref: setRef,\n    style: userStyles,\n    tabIndex: tabIndex,\n    role: cellAriaRole,\n    \"col-id\": colId\n  }, showCellWrapper ? react_1.default.createElement(\"div\", {\n    className: \"ag-cell-wrapper\",\n    role: \"presentation\",\n    ref: setCellWrapperRef\n  }, showContents()) : showContents());\n};\nexports.default = react_1.memo(CellComp);","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","exports","CellCompState","ag_grid_community_1","require","react_1","utils_1","popupEditorComp_1","showJsRenderer_1","beansContext_1","jsComp_1","cellEditorComponentProxy_1","customContext_1","util_1","checkCellEditorDeprecations","popup","cellEditor","cellCtrl","col","getColumn","isPopup","msg_1","getColId","_","doOnce","console","warn","getPopupPosition","msg_2","jsxEditorProxy","editDetails","CellEditorClass","setRef","compProxy","props","getProps","isStateless","isComponentStateless","default","createElement","CustomContext","Provider","setMethods","methods","ref","jsxEditor","newFormat","Fragment","compDetails","params","jsxEditValue","setInlineCellEditorRef","setPopupCellEditorRef","eGui","jsEditorComp","componentClass","reactInlineEditor","componentFromFramework","reactPopupEditor","jsPopupEditor","eParentCell","wrappedContent","jsChildComp","jsxShowValue","showDetails","key","parentId","cellRendererRef","showCellWrapper","reactCellRendererStateless","setECellValue","noCellRenderer","reactCellRenderer","CellRendererClass","valueForNoCellRenderer","toString","bodyJsxFunc","role","id","className","CellComp","context","useContext","BeansContext","printLayout","editingRow","tabIndex","getTabIndex","colId","getColumnIdSanitised","cellInstanceId","getInstanceId","_a","useState","isCellRenderer","getValueToDisplay","force","renderDetails","setRenderDetails","_b","setEditDetails","_c","renderKey","setRenderKey","_d","userStyles","setUserStyles","_e","includeSelection","setIncludeSelection","_f","includeRowDrag","setIncludeRowDrag","_g","includeDndSource","setIncludeDndSource","_h","setJsEditorComp","forceWrapper","useMemo","isForceWrapper","cellAriaRole","getCellAriaRole","useRef","jsCellRendererRef","cellEditorRef","eCellWrapper","cellWrapperDestroyFuncs","eCellValue","_j","cellValueVersion","setCellValueVersion","setCellValueRef","useCallback","current","showTools","setCellEditorRef","editingCancelledByUserComp","isCancelBeforeStart","setTimeout","stopEditing","focusCell","cellRenderer","cssClassManager","CssClassManager","lastRenderDetails","useLayoutEffect","oldDetails","newDetails","oldCompDetails","newCompDetails","refresh","prev","doingJsEditor","createSyncJsComp","compGui","getGui","parentEl","appendChild","afterGuiAttached","destroyBean","parentElement","removeChild","setCellWrapperRef","forEach","f","addComp","comp","eGui_1","insertAdjacentElement","push","removeFromParent","checkboxSelectionComp","createSelectionCheckbox","createDndSource","createRowDragComp","addOrRemoveCssClass","name","on","styles","getFocusableElement","include","getCellEditor","getCellRenderer","getParentOfValue","popupPosition","reactiveCustomComponents","compProxy_1","CellEditorComponentProxy","warnReactiveCustomComponents","cellWrapperOrUndefined","setComp","res","getRowCtrl","setInlineEditingCss","shouldRestoreFocus","isEditing","focus","preventScroll","showContents","style","memo"],"sources":["/Users/trtp/working/milo/final_pricecalc_master/frontend/node_modules/ag-grid-react/lib/reactUi/cells/cellComp.js"],"sourcesContent":["// ag-grid-react v31.1.1\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CellCompState = void 0;\nvar ag_grid_community_1 = require(\"ag-grid-community\");\nvar react_1 = __importStar(require(\"react\"));\nvar utils_1 = require(\"../utils\");\nvar popupEditorComp_1 = __importDefault(require(\"./popupEditorComp\"));\nvar showJsRenderer_1 = __importDefault(require(\"./showJsRenderer\"));\nvar beansContext_1 = require(\"../beansContext\");\nvar jsComp_1 = require(\"../jsComp\");\nvar cellEditorComponentProxy_1 = require(\"../../shared/customComp/cellEditorComponentProxy\");\nvar customContext_1 = require(\"../../shared/customComp/customContext\");\nvar util_1 = require(\"../../shared/customComp/util\");\nvar CellCompState;\n(function (CellCompState) {\n    CellCompState[CellCompState[\"ShowValue\"] = 0] = \"ShowValue\";\n    CellCompState[CellCompState[\"EditValue\"] = 1] = \"EditValue\";\n})(CellCompState = exports.CellCompState || (exports.CellCompState = {}));\nvar checkCellEditorDeprecations = function (popup, cellEditor, cellCtrl) {\n    var col = cellCtrl.getColumn();\n    // cellEditor is written to be a popup editor, however colDef.cellEditorPopup is not set\n    if (!popup && cellEditor.isPopup && cellEditor.isPopup()) {\n        var msg_1 = \"AG Grid: Found an issue in column \" + col.getColId() + \". If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.\";\n        ag_grid_community_1._.doOnce(function () { return console.warn(msg_1); }, 'jsEditorComp-isPopup-' + cellCtrl.getColumn().getColId());\n    }\n    // cellEditor is a popup and is trying to position itself the deprecated way\n    if (popup && cellEditor.getPopupPosition && cellEditor.getPopupPosition() != null) {\n        var msg_2 = \"AG Grid: Found an issue in column \" + col.getColId() + \". If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.\";\n        ag_grid_community_1._.doOnce(function () { return console.warn(msg_2); }, 'jsEditorComp-getPopupPosition-' + cellCtrl.getColumn().getColId());\n    }\n};\nvar jsxEditorProxy = function (editDetails, CellEditorClass, setRef) {\n    var compProxy = editDetails.compProxy;\n    setRef(compProxy);\n    var props = compProxy.getProps();\n    var isStateless = utils_1.isComponentStateless(CellEditorClass);\n    return (react_1.default.createElement(customContext_1.CustomContext.Provider, { value: {\n            setMethods: function (methods) { return compProxy.setMethods(methods); }\n        } },\n        isStateless && react_1.default.createElement(CellEditorClass, __assign({}, props)),\n        !isStateless && react_1.default.createElement(CellEditorClass, __assign({}, props, { ref: function (ref) { return compProxy.setRef(ref); } }))));\n};\nvar jsxEditor = function (editDetails, CellEditorClass, setRef) {\n    var newFormat = editDetails.compProxy;\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        !newFormat && react_1.default.createElement(CellEditorClass, __assign({}, editDetails.compDetails.params, { ref: setRef })),\n        newFormat && jsxEditorProxy(editDetails, CellEditorClass, setRef)));\n};\nvar jsxEditValue = function (editDetails, setInlineCellEditorRef, setPopupCellEditorRef, eGui, cellCtrl, jsEditorComp) {\n    var compDetails = editDetails.compDetails;\n    var CellEditorClass = compDetails.componentClass;\n    var reactInlineEditor = compDetails.componentFromFramework && !editDetails.popup;\n    var reactPopupEditor = compDetails.componentFromFramework && editDetails.popup;\n    var jsPopupEditor = !compDetails.componentFromFramework && editDetails.popup;\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        reactInlineEditor && jsxEditor(editDetails, CellEditorClass, setInlineCellEditorRef),\n        reactPopupEditor &&\n            react_1.default.createElement(popupEditorComp_1.default, { editDetails: editDetails, cellCtrl: cellCtrl, eParentCell: eGui, wrappedContent: jsxEditor(editDetails, CellEditorClass, setPopupCellEditorRef) }),\n        jsPopupEditor &&\n            jsEditorComp &&\n            react_1.default.createElement(popupEditorComp_1.default, { editDetails: editDetails, cellCtrl: cellCtrl, eParentCell: eGui, jsChildComp: jsEditorComp })));\n};\nvar jsxShowValue = function (showDetails, key, parentId, cellRendererRef, showCellWrapper, reactCellRendererStateless, setECellValue) {\n    var compDetails = showDetails.compDetails, value = showDetails.value;\n    var noCellRenderer = !compDetails;\n    var reactCellRenderer = compDetails && compDetails.componentFromFramework;\n    var CellRendererClass = compDetails && compDetails.componentClass;\n    // if we didn't do this, objects would cause React error. we depend on objects for things\n    // like the aggregation functions avg and count, which return objects and depend on toString()\n    // getting called.\n    var valueForNoCellRenderer = (value === null || value === void 0 ? void 0 : value.toString) ? value.toString() : value;\n    var bodyJsxFunc = function () { return (react_1.default.createElement(react_1.default.Fragment, null,\n        noCellRenderer && react_1.default.createElement(react_1.default.Fragment, null, valueForNoCellRenderer),\n        reactCellRenderer && !reactCellRendererStateless && react_1.default.createElement(CellRendererClass, __assign({}, compDetails.params, { key: key, ref: cellRendererRef })),\n        reactCellRenderer && reactCellRendererStateless && react_1.default.createElement(CellRendererClass, __assign({}, compDetails.params, { key: key })))); };\n    return (react_1.default.createElement(react_1.default.Fragment, null, showCellWrapper\n        ? (react_1.default.createElement(\"span\", { role: \"presentation\", id: \"cell-\" + parentId, className: \"ag-cell-value\", ref: setECellValue }, bodyJsxFunc()))\n        : bodyJsxFunc()));\n};\nvar CellComp = function (props) {\n    var context = react_1.useContext(beansContext_1.BeansContext).context;\n    var cellCtrl = props.cellCtrl, printLayout = props.printLayout, editingRow = props.editingRow;\n    var tabIndex = cellCtrl.getTabIndex();\n    var colId = cellCtrl.getColumnIdSanitised();\n    var cellInstanceId = cellCtrl.getInstanceId();\n    // Only provide an initial state when not using a Cell Renderer so that we do not display a raw value before the cell renderer is created.\n    var _a = react_1.useState(function () { return cellCtrl.isCellRenderer() ? undefined : { compDetails: undefined, value: cellCtrl.getValueToDisplay(), force: false }; }), renderDetails = _a[0], setRenderDetails = _a[1];\n    var _b = react_1.useState(), editDetails = _b[0], setEditDetails = _b[1];\n    var _c = react_1.useState(1), renderKey = _c[0], setRenderKey = _c[1];\n    var _d = react_1.useState(), userStyles = _d[0], setUserStyles = _d[1];\n    var _e = react_1.useState(false), includeSelection = _e[0], setIncludeSelection = _e[1];\n    var _f = react_1.useState(false), includeRowDrag = _f[0], setIncludeRowDrag = _f[1];\n    var _g = react_1.useState(false), includeDndSource = _g[0], setIncludeDndSource = _g[1];\n    var _h = react_1.useState(), jsEditorComp = _h[0], setJsEditorComp = _h[1];\n    // useMemo as more then just accessing a boolean on the cellCtrl\n    var forceWrapper = react_1.useMemo(function () { return cellCtrl.isForceWrapper(); }, [cellCtrl]);\n    var cellAriaRole = react_1.useMemo(function () { return cellCtrl.getCellAriaRole(); }, [cellCtrl]);\n    var eGui = react_1.useRef(null);\n    var cellRendererRef = react_1.useRef(null);\n    var jsCellRendererRef = react_1.useRef();\n    var cellEditorRef = react_1.useRef();\n    var eCellWrapper = react_1.useRef();\n    var cellWrapperDestroyFuncs = react_1.useRef([]);\n    // when setting the ref, we also update the state item to force a re-render\n    var eCellValue = react_1.useRef();\n    var _j = react_1.useState(0), cellValueVersion = _j[0], setCellValueVersion = _j[1];\n    var setCellValueRef = react_1.useCallback(function (ref) {\n        eCellValue.current = ref;\n        setCellValueVersion(function (v) { return v + 1; });\n    }, []);\n    var showTools = renderDetails != null && (includeSelection || includeDndSource || includeRowDrag);\n    var showCellWrapper = forceWrapper || showTools;\n    var setCellEditorRef = react_1.useCallback(function (popup, cellEditor) {\n        cellEditorRef.current = cellEditor;\n        if (cellEditor) {\n            checkCellEditorDeprecations(popup, cellEditor, cellCtrl);\n            var editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();\n            if (editingCancelledByUserComp) {\n                // we cannot set state inside render, so hack is to do it in next VM turn\n                setTimeout(function () {\n                    cellCtrl.stopEditing(true);\n                    cellCtrl.focusCell(true);\n                });\n            }\n        }\n    }, [cellCtrl]);\n    var setPopupCellEditorRef = react_1.useCallback(function (cellRenderer) { return setCellEditorRef(true, cellRenderer); }, [setCellEditorRef]);\n    var setInlineCellEditorRef = react_1.useCallback(function (cellRenderer) { return setCellEditorRef(false, cellRenderer); }, [setCellEditorRef]);\n    var cssClassManager = react_1.useRef();\n    if (!cssClassManager.current) {\n        cssClassManager.current = new ag_grid_community_1.CssClassManager(function () { return eGui.current; });\n    }\n    showJsRenderer_1.default(renderDetails, showCellWrapper, eCellValue.current, cellValueVersion, jsCellRendererRef, eGui);\n    // if RenderDetails changed, need to call refresh. This is not our preferred way (the preferred\n    // way for React is just allow the new props to propagate down to the React Cell Renderer)\n    // however we do this for backwards compatibility, as having refresh used to be supported.\n    var lastRenderDetails = react_1.useRef();\n    react_1.useLayoutEffect(function () {\n        var oldDetails = lastRenderDetails.current;\n        var newDetails = renderDetails;\n        lastRenderDetails.current = renderDetails;\n        // if not updating renderDetails, do nothing\n        if (oldDetails == null ||\n            oldDetails.compDetails == null ||\n            newDetails == null ||\n            newDetails.compDetails == null) {\n            return;\n        }\n        var oldCompDetails = oldDetails.compDetails;\n        var newCompDetails = newDetails.compDetails;\n        // if different Cell Renderer, then do nothing, as renderer will be recreated\n        if (oldCompDetails.componentClass != newCompDetails.componentClass) {\n            return;\n        }\n        // if no refresh method, do nothing\n        if (cellRendererRef.current == null || cellRendererRef.current.refresh == null) {\n            return;\n        }\n        var result = cellRendererRef.current.refresh(newCompDetails.params);\n        if (result != true) {\n            // increasing the render key forces the refresh. this is undocumented (for React users,\n            // we don't document the refresh method, instead we tell them to act on new params).\n            // however the GroupCellRenderer has this logic in it and would need a small refactor\n            // to get it working without using refresh() returning false. so this hack staying in,\n            // in React if refresh() is implemented and returns false (or undefined), we force a refresh\n            setRenderKey(function (prev) { return prev + 1; });\n        }\n    }, [renderDetails]);\n    react_1.useLayoutEffect(function () {\n        var doingJsEditor = editDetails && !editDetails.compDetails.componentFromFramework;\n        if (!doingJsEditor) {\n            return;\n        }\n        var compDetails = editDetails.compDetails;\n        var isPopup = editDetails.popup === true;\n        var cellEditor = jsComp_1.createSyncJsComp(compDetails);\n        if (!cellEditor) {\n            return;\n        }\n        var compGui = cellEditor.getGui();\n        setCellEditorRef(isPopup, cellEditor);\n        if (!isPopup) {\n            var parentEl = (forceWrapper ? eCellWrapper : eGui).current;\n            parentEl === null || parentEl === void 0 ? void 0 : parentEl.appendChild(compGui);\n            cellEditor.afterGuiAttached && cellEditor.afterGuiAttached();\n        }\n        setJsEditorComp(cellEditor);\n        return function () {\n            context.destroyBean(cellEditor);\n            setCellEditorRef(isPopup, undefined);\n            setJsEditorComp(undefined);\n            if (compGui && compGui.parentElement) {\n                compGui.parentElement.removeChild(compGui);\n            }\n        };\n    }, [editDetails]);\n    // tool widgets effect\n    var setCellWrapperRef = react_1.useCallback(function (ref) {\n        eCellWrapper.current = ref;\n        if (!eCellWrapper.current) {\n            cellWrapperDestroyFuncs.current.forEach(function (f) { return f(); });\n            cellWrapperDestroyFuncs.current = [];\n            return;\n        }\n        var addComp = function (comp) {\n            var _a;\n            if (comp) {\n                var eGui_1 = comp.getGui();\n                (_a = eCellWrapper.current) === null || _a === void 0 ? void 0 : _a.insertAdjacentElement('afterbegin', eGui_1);\n                cellWrapperDestroyFuncs.current.push(function () {\n                    context.destroyBean(comp);\n                    ag_grid_community_1._.removeFromParent(eGui_1);\n                });\n            }\n            return comp;\n        };\n        if (includeSelection) {\n            var checkboxSelectionComp = cellCtrl.createSelectionCheckbox();\n            addComp(checkboxSelectionComp);\n        }\n        if (includeDndSource) {\n            addComp(cellCtrl.createDndSource());\n        }\n        if (includeRowDrag) {\n            addComp(cellCtrl.createRowDragComp());\n        }\n    }, [cellCtrl, context, includeDndSource, includeRowDrag, includeSelection]);\n    // we use layout effect here as we want to synchronously process setComp and it's side effects\n    // to ensure the component is fully initialised prior to the first browser paint. See AG-7018.\n    var setRef = react_1.useCallback(function (ref) {\n        eGui.current = ref;\n        if (!eGui.current) {\n            return;\n        }\n        if (!cellCtrl) {\n            return;\n        }\n        var compProxy = {\n            addOrRemoveCssClass: function (name, on) { return cssClassManager.current.addOrRemoveCssClass(name, on); },\n            setUserStyles: function (styles) { return setUserStyles(styles); },\n            getFocusableElement: function () { return eGui.current; },\n            setIncludeSelection: function (include) { return setIncludeSelection(include); },\n            setIncludeRowDrag: function (include) { return setIncludeRowDrag(include); },\n            setIncludeDndSource: function (include) { return setIncludeDndSource(include); },\n            getCellEditor: function () { return cellEditorRef.current || null; },\n            getCellRenderer: function () { return cellRendererRef.current ? cellRendererRef.current : jsCellRendererRef.current; },\n            getParentOfValue: function () { return eCellValue.current ? eCellValue.current : eCellWrapper.current ? eCellWrapper.current : eGui.current; },\n            setRenderDetails: function (compDetails, value, force) {\n                setRenderDetails(function (prev) {\n                    if ((prev === null || prev === void 0 ? void 0 : prev.compDetails) !== compDetails || (prev === null || prev === void 0 ? void 0 : prev.value) !== value || (prev === null || prev === void 0 ? void 0 : prev.force) !== force) {\n                        return {\n                            value: value,\n                            compDetails: compDetails,\n                            force: force\n                        };\n                    }\n                    else {\n                        return prev;\n                    }\n                });\n            },\n            setEditDetails: function (compDetails, popup, popupPosition, reactiveCustomComponents) {\n                if (compDetails) {\n                    var compProxy_1 = undefined;\n                    if (reactiveCustomComponents) {\n                        compProxy_1 = new cellEditorComponentProxy_1.CellEditorComponentProxy(compDetails.params, function () { return setRenderKey(function (prev) { return prev + 1; }); });\n                    }\n                    else if (compDetails.componentFromFramework) {\n                        util_1.warnReactiveCustomComponents();\n                    }\n                    // start editing\n                    setEditDetails({\n                        compDetails: compDetails,\n                        popup: popup,\n                        popupPosition: popupPosition,\n                        compProxy: compProxy_1\n                    });\n                    if (!popup) {\n                        setRenderDetails(undefined);\n                    }\n                }\n                else {\n                    // stop editing\n                    setEditDetails(function (editDetails) {\n                        if (editDetails === null || editDetails === void 0 ? void 0 : editDetails.compProxy) {\n                            // if we're using the proxy, we have to manually clear the ref\n                            cellEditorRef.current = undefined;\n                        }\n                        return undefined;\n                    });\n                }\n            }\n        };\n        var cellWrapperOrUndefined = eCellWrapper.current || undefined;\n        cellCtrl.setComp(compProxy, eGui.current, cellWrapperOrUndefined, printLayout, editingRow);\n    }, []);\n    var reactCellRendererStateless = react_1.useMemo(function () {\n        var res = renderDetails &&\n            renderDetails.compDetails &&\n            renderDetails.compDetails.componentFromFramework &&\n            utils_1.isComponentStateless(renderDetails.compDetails.componentClass);\n        return !!res;\n    }, [renderDetails]);\n    react_1.useLayoutEffect(function () {\n        var _a;\n        if (!eGui.current) {\n            return;\n        }\n        cssClassManager.current.addOrRemoveCssClass('ag-cell-value', !showCellWrapper);\n        cssClassManager.current.addOrRemoveCssClass('ag-cell-inline-editing', !!editDetails && !editDetails.popup);\n        cssClassManager.current.addOrRemoveCssClass('ag-cell-popup-editing', !!editDetails && !!editDetails.popup);\n        cssClassManager.current.addOrRemoveCssClass('ag-cell-not-inline-editing', !editDetails || !!editDetails.popup);\n        (_a = cellCtrl.getRowCtrl()) === null || _a === void 0 ? void 0 : _a.setInlineEditingCss(!!editDetails);\n        if (cellCtrl.shouldRestoreFocus() && !cellCtrl.isEditing()) {\n            // Restore focus to the cell if it was focused before and not editing.\n            // If it is editing then it is likely the focus was moved to the editor and we should not move it back.\n            eGui.current.focus({ preventScroll: true });\n        }\n    });\n    var showContents = function () { return (react_1.default.createElement(react_1.default.Fragment, null,\n        (renderDetails != null && jsxShowValue(renderDetails, renderKey, cellInstanceId, cellRendererRef, showCellWrapper, reactCellRendererStateless, setCellValueRef)),\n        (editDetails != null && jsxEditValue(editDetails, setInlineCellEditorRef, setPopupCellEditorRef, eGui.current, cellCtrl, jsEditorComp)))); };\n    return (react_1.default.createElement(\"div\", { ref: setRef, style: userStyles, tabIndex: tabIndex, role: cellAriaRole, \"col-id\": colId }, showCellWrapper\n        ? (react_1.default.createElement(\"div\", { className: \"ag-cell-wrapper\", role: \"presentation\", ref: setCellWrapperRef }, showContents()))\n        : showContents()));\n};\nexports.default = react_1.memo(CellComp);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}